diff -r 7c5161fdc3c8 make/build.xml
--- a/make/build.xml	Sat Aug 13 23:57:32 2016 +0200
+++ b/make/build.xml	Sun Aug 14 00:03:38 2016 +0200
@@ -93,6 +93,7 @@
     <patternset id="jtreg.packages">
         <include name="com/sun/javatest/regtest/**"/>
         <include name="com/sun/javatest/diff/**"/>
+        <include name="java/lang/reflect/**"/>
     </patternset>
 
     <patternset id="jtreg.jdk11.files">
@@ -173,7 +174,7 @@
             debug="true" debuglevel="source,lines"
             srcdir="${src.classes.dir}"
             destdir="${build.classes.dir}"
-            classpath="${build.classes.dir}:${javatest.jar}:${junit.jar}:${testng.jar}"
+            classpath="${build.classes.dir}:${javatest.jar}:${jh.jar}:${junit.jar}:${testng.jar}"
             includeantruntime="true">
             <compilerarg line="-Xlint:all"/>
             <patternset refid="jtreg.packages"/>
diff -r 7c5161fdc3c8 src/share/classes/com/sun/javatest/regtest/Action.java
--- a/src/share/classes/com/sun/javatest/regtest/Action.java	Sat Aug 13 23:57:32 2016 +0200
+++ b/src/share/classes/com/sun/javatest/regtest/Action.java	Sun Aug 14 00:03:38 2016 +0200
@@ -306,6 +306,12 @@
      * </pre>
      */
     protected void startAction(boolean initConfig) {
+        ActionCallBack callBack = script.getCallBack();
+
+        if (callBack != null) {
+            callBack.actionStarted(this);
+        }
+
         String name = getName();
         section = script.getTestResult().createSection(name);
 
@@ -333,6 +339,12 @@
         pw.println(LOG_ELAPSED_TIME + ((double) elapsedTime/1000.0));
         recorder.close();
         section.setStatus(status);
+
+        ActionCallBack callBack = script.getCallBack();
+
+        if (callBack != null) {
+            callBack.actionEnded(this);
+        }
     } // endAction()
 
     //----------workarounds-------------------------------------------------------
diff -r 7c5161fdc3c8 src/share/classes/com/sun/javatest/regtest/ActionCallBack.java
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/src/share/classes/com/sun/javatest/regtest/ActionCallBack.java	Sun Aug 14 00:03:38 2016 +0200
@@ -0,0 +1,38 @@
+/*
+ * Copyright (c) 2014, Oracle and/or its affiliates. All rights reserved.
+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
+ *
+ * This code is free software; you can redistribute it and/or modify it
+ * under the terms of the GNU General Public License version 2 only, as
+ * published by the Free Software Foundation.  Oracle designates this
+ * particular file as subject to the "Classpath" exception as provided
+ * by Oracle in the LICENSE file that accompanied this code.
+ *
+ * This code is distributed in the hope that it will be useful, but WITHOUT
+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
+ * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
+ * version 2 for more details (a copy is included in the LICENSE file that
+ * accompanied this code).
+ *
+ * You should have received a copy of the GNU General Public License version
+ * 2 along with this work; if not, write to the Free Software Foundation,
+ * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
+ *
+ * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
+ * or visit www.oracle.com if you need additional information or have any
+ * questions.
+ */
+
+package com.sun.javatest.regtest;
+
+import java.util.List;
+
+public interface ActionCallBack {
+
+    public void actionStarted(Action action);
+
+    public List<String> getAdditionalVMJavaOptions(Action action);
+
+    public void actionEnded(Action action);
+
+}
diff -r 7c5161fdc3c8 src/share/classes/com/sun/javatest/regtest/CompileAction.java
--- a/src/share/classes/com/sun/javatest/regtest/CompileAction.java	Sat Aug 13 23:57:32 2016 +0200
+++ b/src/share/classes/com/sun/javatest/regtest/CompileAction.java	Sun Aug 14 00:03:38 2016 +0200
@@ -509,6 +509,12 @@
         String javacCmd = script.getJavacProg();
 
         JDKOpts javacVMOpts = new JDKOpts(script.useLongFormOptions());
+        ActionCallBack callBack = script.getCallBack();
+
+        if (callBack != null) {
+            javacVMOpts.addAll(callBack.getAdditionalVMJavaOptions(this));
+        }
+
         javacVMOpts.addAll(script.getTestVMOptions());
         if (addDebugOpts && script.getCompileJDK().equals(script.getTestJDK()))
             javacVMOpts.addAll(script.getTestDebugOptions());
diff -r 7c5161fdc3c8 src/share/classes/com/sun/javatest/regtest/JDK.java
--- a/src/share/classes/com/sun/javatest/regtest/JDK.java	Sat Aug 13 23:57:32 2016 +0200
+++ b/src/share/classes/com/sun/javatest/regtest/JDK.java	Sun Aug 14 00:03:38 2016 +0200
@@ -93,6 +93,10 @@
 
     private static final Map<File, JDK> cache = new HashMap<>();
 
+    public static synchronized void clearCache() {
+        cache.clear();
+    }
+
     /**
      * Creates a JDK object, given its "$JAVA_HOME" path.
      * @param javaHome the "home" directory for the JDK
diff -r 7c5161fdc3c8 src/share/classes/com/sun/javatest/regtest/Main.java
--- a/src/share/classes/com/sun/javatest/regtest/Main.java	Sat Aug 13 23:57:32 2016 +0200
+++ b/src/share/classes/com/sun/javatest/regtest/Main.java	Sun Aug 14 00:03:38 2016 +0200
@@ -1155,6 +1155,8 @@
         return run();
     }
 
+    public static ActionCallBack callBack;
+
     private int run() throws BadArgs, Fault, Harness.Fault, InterruptedException {
         findSystemJarFiles();
 
@@ -1208,10 +1210,10 @@
             Version requiredVersion = ts.getRequiredVersion();
             Version currentVersion = Version.getCurrent();
             if (requiredVersion.compareTo(currentVersion) > 0) {
-                throw new Fault(i18n, "main.requiredVersion",
-                        ts.getPath(),
-                        requiredVersion.version, requiredVersion.build,
-                        currentVersion.version, currentVersion.build);
+                err.println(i18n.getString("main.requiredVersion", new Object[] {
+                                           ts.getPath(),
+                                           requiredVersion.version, requiredVersion.build,
+                                           currentVersion.version, currentVersion.build}));
             }
         }
 
@@ -1877,6 +1879,8 @@
 
             rp.initExprContext(); // will invoke/init jdk.getProperties(params)
 
+            rp.setCallBack(callBack);
+
             return rp;
         } catch (TestSuite.Fault f) {
             // TODO: fix bad string -- need more helpful resource here
diff -r 7c5161fdc3c8 src/share/classes/com/sun/javatest/regtest/MainAction.java
--- a/src/share/classes/com/sun/javatest/regtest/MainAction.java	Sat Aug 13 23:57:32 2016 +0200
+++ b/src/share/classes/com/sun/javatest/regtest/MainAction.java	Sun Aug 14 00:03:38 2016 +0200
@@ -443,6 +443,12 @@
         javaOpts.addAll(script.getTestVMJavaOptions());
         javaOpts.addAll(script.getTestDebugOptions());
 
+        ActionCallBack callBack = script.getCallBack();
+
+        if (callBack != null) {
+            javaOpts.addAll(new ArrayList<String>(callBack.getAdditionalVMJavaOptions(this)));
+        }
+
         Map<String, String> javaProps = new LinkedHashMap<>();
         javaProps.putAll(script.getTestProperties());
 
diff -r 7c5161fdc3c8 src/share/classes/com/sun/javatest/regtest/RegressionParameters.java
--- a/src/share/classes/com/sun/javatest/regtest/RegressionParameters.java	Sat Aug 13 23:57:32 2016 +0200
+++ b/src/share/classes/com/sun/javatest/regtest/RegressionParameters.java	Sun Aug 14 00:03:38 2016 +0200
@@ -1100,4 +1100,14 @@
     private final Set<Integer> retainStatusSet = new HashSet<>(4);
     private Pattern retainFilesPattern;
 
+    private ActionCallBack callBack;
+
+    public ActionCallBack getCallBack() {
+        return callBack;
+    }
+
+    public void setCallBack(ActionCallBack callBack) {
+        this.callBack = callBack;
+    }
+
 }
diff -r 7c5161fdc3c8 src/share/classes/com/sun/javatest/regtest/RegressionScript.java
--- a/src/share/classes/com/sun/javatest/regtest/RegressionScript.java	Sat Aug 13 23:57:32 2016 +0200
+++ b/src/share/classes/com/sun/javatest/regtest/RegressionScript.java	Sun Aug 14 00:03:38 2016 +0200
@@ -1002,6 +1002,10 @@
         return params.getCompileJDK().getJavacProg().getPath();
     }
 
+    ActionCallBack getCallBack() {
+        return params.getCallBack();
+    }
+
     //--------------------------------------------------------------------------
 
     // Get the standard properties to be set for tests
